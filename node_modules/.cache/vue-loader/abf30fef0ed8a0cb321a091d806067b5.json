{"remainingRequest":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\MEIW_PAW\\MiniProj2\\src\\views\\animals\\ListAnimals.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\MEIW_PAW\\MiniProj2\\src\\views\\animals\\ListAnimals.vue","mtime":1576832059000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEZFVENIX0FOSU1BTFMsIFJFTU9WRV9BTklNQUwgfSBmcm9tICJAL3N0b3JlL2FuaW1hbHMvYW5pbWFsLmNvbnN0YW50cyI7CmltcG9ydCBIZWFkZXJQYWdlIGZyb20gIkAvY29tcG9uZW50cy9IZWFkZXJQYWdlLnZ1ZSI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWFuYWdlQW5pbWFscyIsCiAgY29tcG9uZW50czogewogICAgSGVhZGVyUGFnZQogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBhbmltYWxzOiBbXSwKICAgICAgc29ydFR5cGU6IDEKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycygiYW5pbWFsIiwgWyJnZXRBbmltYWxzIiwgImdldE1lc3NhZ2UiXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoQW5pbWFscygpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goYGFuaW1hbC8ke0ZFVENIX0FOSU1BTFN9YCkudGhlbigKICAgICAgICAoKSA9PiB7CiAgICAgICAgICB0aGlzLmFuaW1hbHMgPSB0aGlzLmdldEFuaW1hbHM7CiAgICAgICAgfSwKICAgICAgICBlcnIgPT4gewogICAgICAgICAgdGhpcy4kYWxlcnQoYCR7ZXJyLm1lc3NhZ2V9YCwgIkVycm8iLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgc29ydCgpIHsKICAgICAgdGhpcy5hbmltYWxzLnNvcnQodGhpcy5jb21wYXJlTmFtZXMpOwogICAgICB0aGlzLnNvcnRUeXBlICo9IC0xOwogICAgfSwKICAgIGNvbXBhcmVOYW1lcyh1MSwgdTIpIHsKICAgICAgaWYgKHUxLm5hbWUgPiB1Mi5uYW1lKSByZXR1cm4gMSAqIHRoaXMuc29ydFR5cGU7CiAgICAgIGVsc2UgaWYgKHUxLm5hbWUgPCB1Mi5uYW1lKSByZXR1cm4gLTEgKiB0aGlzLnNvcnRUeXBlOwogICAgICBlbHNlIHJldHVybiAwOwogICAgfSwKCiAgICB2aWV3QW5pbWFsKGlkKSB7CiAgICAgIGNvbnN0IGFuaW1hbCA9IHRoaXMuYW5pbWFscy5maW5kKGFuaW1hbCA9PiBhbmltYWwuX2lkID09PSBpZCk7CgogICAgICB0aGlzLiRmaXJlKHsKICAgICAgICB0aXRsZTogYW5pbWFsLm5hbWUsCiAgICAgICAgaHRtbDogdGhpcy5nZW5lcmF0ZVRlbXBsYXRlKGFuaW1hbCksCiAgICAgICAgaW1hZ2VVcmw6IGFuaW1hbC5saW5rc1swXS51cmwsCiAgICAgICAgaW1hZ2VXaWR0aDogNDAwLAogICAgICAgIGltYWdlSGVpZ2h0OiAyMDAsCiAgICAgICAgaW1hZ2VBbHQ6ICJJbWFnZW0gZGVzY29uaGVjaWRhIgogICAgICB9KTsKICAgIH0sCgogICAgZ2VuZXJhdGVUZW1wbGF0ZShhbmltYWwpIHsKICAgICAgbGV0IHJlc3BvbnNlID0gYAogICAgICAgICAgPGg0PkdydXBvOjwvYj4gJHthbmltYWwuZ3JvdXB9PC9oND4KICAgICAgICAgIDxoNT4obsOtdmVsOjwvYj4gJHthbmltYWwubGV2ZWx9KTwvaDU+CiAgICAgICAgICA8cD4ke2FuaW1hbC5kZXNjcmlwdGlvbn08L3A+IAogICAgICAgICAgPHA+RWxlbWVudG9zIG11bHRpbcOpZGlhOgogICAgICAgIGA7CiAgICAgIGZvciAoY29uc3QgbGluayBvZiBhbmltYWwubGlua3MpIHsKICAgICAgICByZXNwb25zZSArPSBgIDxhIGhyZWY9JyR7bGluay51cmx9JyB0YXJnZXQ9J19ibGFuayc+JHtsaW5rLnR5cGVzfTwvYT5gOwogICAgICB9CiAgICAgIHJlc3BvbnNlICs9IGA8L3A+PHA+Q29tZW50w6FyaW9zOiAke2FuaW1hbC5jb21tZW50cy5sZW5ndGh9IEF2YWxpYcOnw7VlczogJHthbmltYWwuZXZhbHVhdGlvbi5sZW5ndGh9PC9wPiBgOwogICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICB9LAogICAgcmVtb3ZlQW5pbWFsKGlkKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oCiAgICAgICAgIlNlIHNpbSwgY2xpcXVlIGVtIE9LIiwKICAgICAgICAiRGVzZWphIG1lc21vIHJlbW92ZXIgbyBhbmltYWw/IiwKICAgICAgICAid2FybmluZyIsCiAgICAgICAgeyBjb25maXJtQnV0dG9uVGV4dDogIk9LIiwgY2FuY2VsQnV0dG9uVGV4dDogIkNhbmNlbGFyIiB9CiAgICAgICkudGhlbigKICAgICAgICAoKSA9PiB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChgYW5pbWFsLyR7UkVNT1ZFX0FOSU1BTH1gLCBpZCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJGFsZXJ0KHRoaXMuZ2V0TWVzc2FnZSwgIkFuaW1hbCByZW1vdmlkbyEiLCAic3VjY2VzcyIpOwogICAgICAgICAgICB0aGlzLmZldGNoQW5pbWFscygpOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAoKSA9PiB7CiAgICAgICAgICB0aGlzLiRhbGVydCgiUmVtb8Onw6NvIGNhbmNlbGFkYSEiLCAiSW5mb3JtYcOnw6NvIiwgImluZm8iKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaEFuaW1hbHMoKTsKICB9Cn07Cg=="},{"version":3,"sources":["ListAnimals.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListAnimals.vue","sourceRoot":"src/views/animals","sourcesContent":["<template>\n  <section class=\"page-section\">\n    <b-container>\n      <HeaderPage title=\"Gestão de Animais\" />\n      <!--MENU TOPO-->\n      <b-row class=\"mb-4\">\n        <b-col cols=\"2\"></b-col>\n        <b-col>\n          <router-link\n            :to=\"{name:'addAnimal'}\"\n            tag=\"button\"\n            class=\"btn btn-outline-success mr-2 mt-2\"\n          >\n            <i class=\"fas fa-plus-square\"></i> ADICIONAR ANIMAL\n          </router-link>\n          <router-link :to=\"{name:'admin'}\" tag=\"button\" class=\"btn btn-outline-info mr-2 mt-2\">\n            <i class=\"fas fa-bars\"></i> MENU PRINCIPAL\n          </router-link>\n        </b-col>\n        <b-col cols=\"2\"></b-col>\n      </b-row>\n\n      <!--TABLE-->\n      <b-row>\n        <b-col cols=\"2\"></b-col>\n        <b-col>\n          <table class=\"table table-striped\">\n            <thead class=\"thead-dark\">\n              <tr>\n                <th scope=\"col\">\n                  NOME\n                  <i class=\"fas fa-arrow-up\" v-if=\"sortType===1\" @click=\"sort()\"></i>\n                  <i class=\"fas fa-arrow-down\" v-else @click=\"sort()\"></i>\n                </th>\n                <th scope=\"col\">GRUPO</th>\n                <th scope=\"col\">NÍVEL</th>\n                <th scope=\"col\">AÇÕES</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"animal of animals\" :key=\"animal._id\">\n                <td class=\"pt-4\">{{animal.name}}</td>\n                <td class=\"pt-4\">{{animal.group}}</td>\n                <td class=\"pt-4\">{{animal.level}}</td>\n                <td>\n                  <router-link\n                    :to=\"{name:'editAnimal', params:{animalId: animal._id}}\"\n                    tag=\"button\"\n                    class=\"btn btn-outline-success mr-2 mt-2\"\n                  >\n                    <i class=\"fas fa-edit\"></i> EDITAR\n                  </router-link>\n                  <button\n                    @click=\"viewAnimal(animal._id)\"\n                    type=\"button\"\n                    class=\"btn btn-outline-success mr-2 mt-2\"\n                  >\n                    <i class=\"fas fa-search\"></i> VER\n                  </button>\n                  <button\n                    @click=\"removeAnimal(animal._id)\"\n                    type=\"button\"\n                    class=\"btn btn-outline-danger mr-2 mt-2\"\n                  >\n                    <i class=\"fas fa-trash-alt\"></i> REMOVER\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </b-col>\n        <b-col cols=\"2\"></b-col>\n      </b-row>\n    </b-container>\n  </section>\n</template>\n\n<script>\nimport { FETCH_ANIMALS, REMOVE_ANIMAL } from \"@/store/animals/animal.constants\";\nimport HeaderPage from \"@/components/HeaderPage.vue\";\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  name: \"ManageAnimals\",\n  components: {\n    HeaderPage\n  },\n  data: function() {\n    return {\n      animals: [],\n      sortType: 1\n    };\n  },\n  computed: {\n    ...mapGetters(\"animal\", [\"getAnimals\", \"getMessage\"])\n  },\n  methods: {\n    fetchAnimals() {\n      this.$store.dispatch(`animal/${FETCH_ANIMALS}`).then(\n        () => {\n          this.animals = this.getAnimals;\n        },\n        err => {\n          this.$alert(`${err.message}`, \"Erro\", \"error\");\n        }\n      );\n    },\n    sort() {\n      this.animals.sort(this.compareNames);\n      this.sortType *= -1;\n    },\n    compareNames(u1, u2) {\n      if (u1.name > u2.name) return 1 * this.sortType;\n      else if (u1.name < u2.name) return -1 * this.sortType;\n      else return 0;\n    },\n\n    viewAnimal(id) {\n      const animal = this.animals.find(animal => animal._id === id);\n\n      this.$fire({\n        title: animal.name,\n        html: this.generateTemplate(animal),\n        imageUrl: animal.links[0].url,\n        imageWidth: 400,\n        imageHeight: 200,\n        imageAlt: \"Imagem desconhecida\"\n      });\n    },\n\n    generateTemplate(animal) {\n      let response = `\n          <h4>Grupo:</b> ${animal.group}</h4>\n          <h5>(nível:</b> ${animal.level})</h5>\n          <p>${animal.description}</p> \n          <p>Elementos multimédia:\n        `;\n      for (const link of animal.links) {\n        response += ` <a href='${link.url}' target='_blank'>${link.types}</a>`;\n      }\n      response += `</p><p>Comentários: ${animal.comments.length} Avaliações: ${animal.evaluation.length}</p> `;\n      return response;\n    },\n    removeAnimal(id) {\n      this.$confirm(\n        \"Se sim, clique em OK\",\n        \"Deseja mesmo remover o animal?\",\n        \"warning\",\n        { confirmButtonText: \"OK\", cancelButtonText: \"Cancelar\" }\n      ).then(\n        () => {\n          this.$store.dispatch(`animal/${REMOVE_ANIMAL}`, id).then(() => {\n            this.$alert(this.getMessage, \"Animal removido!\", \"success\");\n            this.fetchAnimals();\n          });\n        },\n        () => {\n          this.$alert(\"Remoção cancelada!\", \"Informação\", \"info\");\n        }\n      );\n    }\n  },\n  created() {\n    this.fetchAnimals();\n  }\n};\n</script>"]}]}