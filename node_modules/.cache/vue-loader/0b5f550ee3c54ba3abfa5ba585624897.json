{"remainingRequest":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\MEIW_PAW\\MiniProj2\\src\\views\\Animal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\MEIW_PAW\\MiniProj2\\src\\views\\Animal.vue","mtime":1576832059000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXJQYWdlIGZyb20gIkAvY29tcG9uZW50cy9IZWFkZXJQYWdlLnZ1ZSI7CmltcG9ydCB7IEVESVRfQU5JTUFMIH0gZnJvbSAiQC9zdG9yZS9hbmltYWxzL2FuaW1hbC5jb25zdGFudHMiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQW5pbWFsIiwKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXJQYWdlCiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGFuaW1hbDogIiIsCiAgICAgIGNvbW1lbnQ6ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoImFuaW1hbCIsIFsiZ2V0QW5pbWFsc0J5SWQiLCAiZ2V0TWVzc2FnZSJdKSwKICAgIC4uLm1hcEdldHRlcnMoImF1dGgiLCBbImdldFByb2ZpbGUiXSksCiAgICAuLi5tYXBHZXR0ZXJzKCJ1c2VyIiwgWyJnZXRVc2Vyc0J5SWQiLCJnZXROYW1lQnlJZCJdKSwKICAgIC4uLm1hcEdldHRlcnMoWyJnZXRVc2VyTGV2ZWxCeVBvaW50cyJdKQogIH0sCiAgbWV0aG9kczogewogICAgc2hvd1ZpZGVvKHZpZGVvVXJsKSB7CiAgICAgIHRoaXMuJGZpcmUoewogICAgICAgIHRpdGxlOiAiPHN0cm9uZz5Ww61kZW88L3N0cm9uZz4iLAogICAgICAgIGljb246ICJpbmZvIiwKICAgICAgICBodG1sOiBgCiAgICAgICAgICA8aWZyYW1lIHdpZHRoPSc0NjAnIGhlaWdodD0nMzE1JyAKICAgICAgICAgICAgc3JjPScke3ZpZGVvVXJsfScgZnJhbWVib3JkZXI9JzAnIAogICAgICAgICAgICBhbGxvdz0nYWNjZWxlcm9tZXRlcjsgYXV0b3BsYXk7IGVuY3J5cHRlZC1tZWRpYTsgZ3lyb3Njb3BlOyBwaWN0dXJlLWluLXBpY3R1cmUnCiAgICAgICAgICAgIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4gCiAgICAgICAgICBgLAogICAgICAgIGZvY3VzQ29uZmlybTogZmFsc2UsCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICc8aSBjbGFzcz0iZmEgZmEtdGh1bWJzLXVwIj48L2k+IE9LJwogICAgICB9KTsKICAgIH0sCiAgICBzaG93Q29tbWVudHMoKSB7CiAgICAgIHRoaXMuJGZpcmUoewogICAgICAgIHRpdGxlOiAiPHN0cm9uZz5Db21lbnTDoXJpb3M8L3N0cm9uZz4iLAogICAgICAgIGljb246ICJpbmZvIiwKICAgICAgICBodG1sOiB0aGlzLmdlbmVyYXRlQ29tbWVudHMoKSwKICAgICAgICBmb2N1c0NvbmZpcm06IGZhbHNlLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnPGkgY2xhc3M9ImZhIGZhLXRodW1icy11cCI+PC9pPiBPSycKICAgICAgfSk7CiAgICB9LAogICAgZ2VuZXJhdGVDb21tZW50cygpIHsKICAgICAgbGV0IGNvbW1lbnRzID0gIiI7CiAgICAgIGZvciAobGV0IGNvbW1lbnQgb2YgdGhpcy5hbmltYWwuY29tbWVudHMpIHsKICAgICAgICBjb21tZW50cyArPSBgCiAgICAgICAgPGItYWxlcnQgc2hvdyB2YXJpYW50PSJzZWNvbmRhcnkiPgogICAgICAgICAgCiAgICAgICAgICAKICAgICAgICAgIDxiPiR7Y29tbWVudC51c2VyLm5hbWV9PC9iPiAoJHtjb21tZW50LmRhdGV9KTxicj4KICAgICAgICAgICR7Y29tbWVudC5ib2R5fSAgCiAgICAgICAgPC9iLWFsZXJ0PgogICAgICAgIDxicj48YnI+CiAgICAgICAgICBgOwogICAgICB9CiAgICAgIHJldHVybiBjb21tZW50czsKICAgIH0sCiAgICBzZXRDb21tZW50KCkgewogICAgICB0aGlzLmFuaW1hbC5jb21tZW50cy5wdXNoKHsKICAgICAgICBib2R5OiB0aGlzLmNvbW1lbnQsCiAgICAgICAgdXNlcjogdGhpcy5nZXRQcm9maWxlLl9pZCwKICAgICAgICBkYXRlOiB0aGlzLmdldEN1cnJlbnREYXRlVGltZSgpCiAgICAgIH0pOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChgYW5pbWFsLyR7RURJVF9BTklNQUx9YCwgdGhpcy5hbmltYWwpLnRoZW4oCiAgICAgICAgKCkgPT4gewogICAgICAgICAgdGhpcy4kYWxlcnQoYE9icmlnYWRvIHBlbG8gY29tZW50w6FyaW8hYCwgIkNvbWVudMOhcmlvcyIsICJzdWNjZXNzIik7CiAgICAgICAgfSwKICAgICAgICBlcnIgPT4gewogICAgICAgICAgdGhpcy4kYWxlcnQoYCR7ZXJyLm1lc3NhZ2V9YCwgIkVycm8iLCAiZXJyb3IiKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgZ2V0Q3VycmVudERhdGVUaW1lKCkgewogICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgIGNvbnN0IGRhdGUgPQogICAgICAgIHRvZGF5LmdldEZ1bGxZZWFyKCkgKwogICAgICAgICItIiArCiAgICAgICAgKHRvZGF5LmdldE1vbnRoKCkgKyAxKSArCiAgICAgICAgIi0iICsKICAgICAgICB0b2RheS5nZXREYXkoKTsKICAgICAgY29uc3QgdGltZSA9IHRvZGF5LmdldEhvdXJzKCkgKyAiOiIgKyB0b2RheS5nZXRNaW51dGVzKCk7CiAgICAgIHJldHVybiBgJHtkYXRlfSAke3RpbWV9YDsKICAgIH0sCiAgICBzZXRDdXJyZW50RGF0ZVRpbWUoY29tbWVudERhdGUpIHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGNvbW1lbnREYXRlKTsKICAgICAgY29uc3QgZm9ybWF0RGF0ZSA9CiAgICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpICsgIi0iICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgIi0iICsgZGF0ZS5nZXREYXkoKTsKICAgICAgY29uc3QgZm9ybWF0VGltZSA9IGRhdGUuZ2V0SG91cnMoKSArICI6IiArIGRhdGUuZ2V0TWludXRlcygpOwogICAgICByZXR1cm4gYCR7Zm9ybWF0RGF0ZX0gJHtmb3JtYXRUaW1lfWA7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5hbmltYWwgPSB0aGlzLmdldEFuaW1hbHNCeUlkKHRoaXMuJHJvdXRlLnBhcmFtcy5hbmltYWxJZCk7CiAgfQp9Owo="},{"version":3,"sources":["Animal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Animal.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section class=\"page-section\">\n    <b-container>\n      <HeaderPage :title=\"animal.name\" />\n      <b-row>\n        <b-col>\n          <b-card class=\"overflow-hidden\" style=\"max-width: 1540px; \">\n            <b-row>\n              <b-col md=\"6\" align=\"center\">\n                <b-card-img :src=\"animal.links[0].url\" class=\"rounded-0 mb-2\"></b-card-img>\n                <br />\n                <b-button variant=\"danger\" class=\"mr-2\" @click=\"setComment()\">\n                  <i class=\"fas fa-arrow-alt-circle-left\"></i>\n                </b-button>&nbsp;1 de 3&nbsp;\n                <b-button variant=\"danger\" class=\"mr-2\" @click=\"setComment()\">\n                  <i class=\"fas fa-arrow-alt-circle-right\"></i>\n                </b-button>\n              </b-col>\n              <b-col md=\"6\">\n                <b-card-body :title=\"animal.name + ' (' + animal.group + ')'\">\n                  <b-card-text align=\"left\">\n                    <!-- Level -->\n                    <i class=\"fas fa-medal fa-lg ml-2\"></i>\n                    {{animal.level}}\n                    <!-- Evaluation -->\n                    <i class=\"fas fa-star fa-lg ml-2\"></i>\n                    {{animal.evaluation.length}}\n                    <!-- Comments -->\n                    <i class=\"fas fa-comment fa-lg ml-2\" @click=\"showComments()\"></i>\n                    {{animal.comments.length}}\n                    <!-- Ranking -->\n                    <i class=\"fas fa-clipboard-list fa-lg ml-2\"></i>\n                    3\n                  </b-card-text>\n                  <b-card-text>\n                    <b>Descrição:</b>\n                    {{animal.description}}\n                  </b-card-text>\n                  <b-card-text>\n                    <b>Comentários:</b>\n                    <b-alert\n                      show\n                      variant=\"secondary\"\n                      v-for=\"comment in this.animal.comments\"\n                      :key=\"comment._id\"\n                    >\n                      <b>{{comment.user.name}}</b>\n                      ({{setCurrentDateTime(comment.date)}})\n                      <br />\n                      {{comment.body}}\n                    </b-alert>\n                  </b-card-text>\n                  <b-card-text>\n                    <b>Comentário:</b>\n                    <div class=\"form-group\">\n                      <textarea\n                        id=\"txtDescription\"\n                        class=\"form-control\"\n                        placeholder=\"escreve descrição\"\n                        cols=\"30\"\n                        rows=\"3\"\n                        v-model=\"comment\"\n                        required\n                      ></textarea>\n                      <br />\n                      <b-button variant=\"danger\" class=\"mr-2\" @click=\"setComment()\">\n                        <i class=\"fas fa-comments\"></i> COMENTAR\n                      </b-button>\n                      <b-button\n                        variant=\"outline-success\"\n                        class=\"mr-2\"\n                        @click=\"showVideo(animal.links[1].url)\"\n                      >\n                        <i class=\"fas fa-video\"></i> VER VÍDEO\n                      </b-button>\n\n                      <router-link\n                        :to=\"{name: 'animals'}\"\n                        tag=\"b-button\"\n                        variant=\"outline-danger\"\n                        align=\"center\"\n                        class=\"mr-2\"\n                      >\n                        <i class=\"fas fa-arrow-alt-circle-left\"></i> VOLTAR\n                      </router-link>\n                    </div>\n                  </b-card-text>\n                </b-card-body>\n              </b-col>\n            </b-row>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n  </section>\n</template>\n\n<script>\nimport HeaderPage from \"@/components/HeaderPage.vue\";\nimport { EDIT_ANIMAL } from \"@/store/animals/animal.constants\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"Animal\",\n  components: {\n    HeaderPage\n  },\n  data: function() {\n    return {\n      animal: \"\",\n      comment: \"\"\n    };\n  },\n  computed: {\n    ...mapGetters(\"animal\", [\"getAnimalsById\", \"getMessage\"]),\n    ...mapGetters(\"auth\", [\"getProfile\"]),\n    ...mapGetters(\"user\", [\"getUsersById\",\"getNameById\"]),\n    ...mapGetters([\"getUserLevelByPoints\"])\n  },\n  methods: {\n    showVideo(videoUrl) {\n      this.$fire({\n        title: \"<strong>Vídeo</strong>\",\n        icon: \"info\",\n        html: `\n          <iframe width='460' height='315' \n            src='${videoUrl}' frameborder='0' \n            allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture'\n            allowfullscreen></iframe> \n          `,\n        focusConfirm: false,\n        confirmButtonText: '<i class=\"fa fa-thumbs-up\"></i> OK'\n      });\n    },\n    showComments() {\n      this.$fire({\n        title: \"<strong>Comentários</strong>\",\n        icon: \"info\",\n        html: this.generateComments(),\n        focusConfirm: false,\n        confirmButtonText: '<i class=\"fa fa-thumbs-up\"></i> OK'\n      });\n    },\n    generateComments() {\n      let comments = \"\";\n      for (let comment of this.animal.comments) {\n        comments += `\n        <b-alert show variant=\"secondary\">\n          \n          \n          <b>${comment.user.name}</b> (${comment.date})<br>\n          ${comment.body}  \n        </b-alert>\n        <br><br>\n          `;\n      }\n      return comments;\n    },\n    setComment() {\n      this.animal.comments.push({\n        body: this.comment,\n        user: this.getProfile._id,\n        date: this.getCurrentDateTime()\n      });\n      this.$store.dispatch(`animal/${EDIT_ANIMAL}`, this.animal).then(\n        () => {\n          this.$alert(`Obrigado pelo comentário!`, \"Comentários\", \"success\");\n        },\n        err => {\n          this.$alert(`${err.message}`, \"Erro\", \"error\");\n        }\n      );\n    },\n    getCurrentDateTime() {\n      const today = new Date();\n      const date =\n        today.getFullYear() +\n        \"-\" +\n        (today.getMonth() + 1) +\n        \"-\" +\n        today.getDay();\n      const time = today.getHours() + \":\" + today.getMinutes();\n      return `${date} ${time}`;\n    },\n    setCurrentDateTime(commentDate) {\n      const date = new Date(commentDate);\n      const formatDate =\n        date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDay();\n      const formatTime = date.getHours() + \":\" + date.getMinutes();\n      return `${formatDate} ${formatTime}`;\n    }\n  },\n  created() {\n    this.animal = this.getAnimalsById(this.$route.params.animalId);\n  }\n};\n</script>\n"]}]}