{"remainingRequest":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\MEIW_PAW\\MiniProj2\\src\\views\\Quiz.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\MEIW_PAW\\MiniProj2\\src\\views\\Quiz.vue","mtime":1576832059000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\MEIW_PAW\\MiniProj2\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXJQYWdlIGZyb20gIkAvY29tcG9uZW50cy9IZWFkZXJQYWdlLnZ1ZSI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgRURJVF9VU0VSIH0gZnJvbSAiQC9zdG9yZS91c2Vycy91c2VyLmNvbnN0YW50cyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFuaW1hbCIsCiAgY29tcG9uZW50czogewogICAgSGVhZGVyUGFnZQogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBxdWl6OiAiIiwKICAgICAgb3B0aW9uOiAiIiwKICAgICAgY3VycmVudFF1ZXN0aW9uOiAxLAogICAgICBhbnN3ZXJzOiBbXSwKICAgICAgY29ycmVjdEFuc3dlcnM6IDAsCiAgICAgIHNlY29uZHM6IDMwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoImF1dGgiLCBbImdldFByb2ZpbGUiXSksCiAgICAuLi5tYXBHZXR0ZXJzKCJ1c2VyIiwgWyJnZXRVc2Vyc0J5SWQiXSksCiAgICAuLi5tYXBHZXR0ZXJzKCJxdWl6IiwgWyJnZXRRdWl6QnlJZCJdKQogIH0sCiAgbWV0aG9kczogewogICAgc2V0QW5zd2VyKCkgewogICAgICB0aGlzLmFuc3dlcnMucHVzaCh0aGlzLm9wdGlvbik7CiAgICAgIHRoaXMuY3VycmVudFF1ZXN0aW9uICs9IDE7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRRdWVzdGlvbiA+IHRoaXMucXVpei5xdWVzdGlvbnMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5ldmFsdWF0ZSgpOwogICAgICB9CiAgICB9LAogICAgZXZhbHVhdGUoKSB7CiAgICAgIGxldCBpID0gMDsKICAgICAgZm9yIChjb25zdCBxdWVzdGlvbiBvZiB0aGlzLnF1aXoucXVlc3Rpb25zKSB7CiAgICAgICAgY29uc3QgaWQgPSBxdWVzdGlvbi5hbnN3ZXJzLmZpbHRlcihhbnN3ZXIgPT4gYW5zd2VyLmNvcnJlY3QgPT09IHRydWUpWzBdCiAgICAgICAgICAuX2lkOwogICAgICAgIGlmIChpZCA9PSB0aGlzLmFuc3dlcnNbaV0pIHsKICAgICAgICAgIHRoaXMuY29ycmVjdEFuc3dlcnMgKz0gMTsKICAgICAgICB9CiAgICAgICAgaSsrOwogICAgICB9CiAgICAgIGlmICh0aGlzLmNvcnJlY3RBbnN3ZXJzID09PSB0aGlzLnF1aXoucXVlc3Rpb25zLmxlbmd0aCkgewogICAgICAgIHRoaXMuc2V0U2NvcmUodGhpcy5xdWl6LnBvaW50cyk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRTY29yZShwb2ludHMpIHsKICAgICAgY29uc3QgdXNlciA9IHRoaXMuZ2V0UHJvZmlsZSAKICAgICAgdXNlci5nYW1pZmljYXRpb24ucG9pbnRzICs9IHBvaW50cwogICAgICB1c2VyLmdhbWlmaWNhdGlvbi5xdWl6ICs9IDEKICAgICAgCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKGB1c2VyLyR7RURJVF9VU0VSfWAsIHVzZXIpLnRoZW4oCiAgICAgICAgKCkgPT4gewogICAgICAgICAgLy90aGlzLiRhbGVydCgiU2NvcmUgYXR1YWxpemFkbyEiLCAiVXRpbGl6YWRvciBhdHVhbGl6YWRvISIsICJzdWNjZXNzIik7CiAgICAgICAgICAvL3JvdXRlci5wdXNoKHsgbmFtZTogImhvbWUiIH0pOwogICAgICAgIH0sCiAgICAgICAgZXJyID0+IHsKICAgICAgICAgIHRoaXMuJGFsZXJ0KGAke2Vyci5tZXNzYWdlfWAsICJFcnJvIiwgImVycm9yIik7CiAgICAgICAgfQogICAgICApOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMucXVpeiA9IHRoaXMuZ2V0UXVpekJ5SWQodGhpcy4kcm91dGUucGFyYW1zLnF1aXpJZCk7CiAgICBsZXQgeCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnNlY29uZHMgLT0gMTsKICAgICAgaWYgKHRoaXMuc2Vjb25kcyA8IDApIHsKICAgICAgICBjbGVhckludGVydmFsKHgpOwogICAgICAgIHRoaXMuc2Vjb25kcyA9ICJFWFBJUkVEIjsKICAgICAgfQogICAgfSwgMTAwMCk7CiAgfQp9Owo="},{"version":3,"sources":["Quiz.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Quiz.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <section class=\"page-section\">\n    <b-container>\n      <HeaderPage :title=\"'Quiz nº' + quiz.level + ' - ' + quiz.name\" />\n      <b-row>\n        <b-col cols=\"1\"></b-col>\n        <b-col cols=\"10\" align=\"right\">{{seconds}}</b-col>\n        <b-col cols=\"1\"></b-col>\n      </b-row>\n      <b-row>\n        <b-col cols=\"1\"></b-col>\n        <b-col cols=\"10\">\n          <div>\n            <b-card no-body>\n              <b-tabs pills card vertical>\n                <b-tab\n                  :disabled=\"currentQuestion !== index + 1\"\n                  v-for=\"(question, index) in quiz.questions\"\n                  :key=\"question.id\"\n                  :title=\"'QUESTÃO #' + (index + 1)\"\n                >\n                  <b-card\n                    :title=\"question.question\"\n                    :sub-title=\"'nível: ' + question.level + ' | tipo: ' + question.type\"\n                  >\n                    <b-card-text v-html=\"question.description\" />\n                    <b-form-group label=\"Respostas possíveis\">\n                      <b-form-radio\n                        v-for=\"answer in question.answers\"\n                        :key=\"answer.id\"\n                        v-model=\"option\"\n                        name=\"some-radios\"\n                        :value=\"answer._id\"\n                      >{{answer.title}}</b-form-radio>\n                    </b-form-group>\n                    <b-button variant=\"outline-success\" @click=\"setAnswer()\">RESPONDER</b-button>\n                  </b-card>\n                </b-tab>\n                <b-tab title=\"RESULTADOS\" :disabled=\"currentQuestion <= quiz.questions.length\">\n                  <b-card-text class=\"text-center\">\n                    <div>\n                      <h5>Respostas certas</h5>\n                      <b-progress\n                        :value=\"correctAnswers\"\n                        :max=\"quiz.questions.length\"\n                        variant=\"success\"\n                        show-value\n                        class=\"mb-3\"\n                      ></b-progress>\n                      <h5>Respostas erradas</h5>\n                      <b-progress\n                        :value=\"quiz.questions.length - correctAnswers\"\n                        :max=\"quiz.questions.length\"\n                        variant=\"danger\"\n                        show-value\n                        class=\"mb-3\"\n                      ></b-progress>\n                    </div>\n\n                    <div v-if=\"quiz.questions.length === correctAnswers\">\n                      <i class=\"fas fa-smile fa-3x\"></i>\n                      <br />\n                      <h2>PARABÉNS, GANHASTE {{quiz.points}} PONTOS!</h2>\n                      <br />\n                      <router-link :to=\"{name: 'quizzes'}\" tag=\"b-button\" variant=\"outline-success\" class=\"mr-2\">\n                        <i class=\"fas fa-poll-h\"></i> JOGAR NOVO NÍVEL DO QUIZ\n                      </router-link>\n                      <router-link :to=\"{name: 'home'}\" tag=\"b-button\" variant=\"outline-success\" class=\"mr-2\">\n                        <i class=\"fas fa-home\"></i> PÁGINA PRINCIPAL\n                      </router-link>\n                      <b-button variant=\"outline-info\" @click=\"evaluate()\">VER ANIMAIS</b-button>\n                    </div>\n                    <div v-else>\n                      <i class=\"fas fa-frown fa-3x\"></i>\n                      <br />\n                      <h2>PACIÊNCIA, JOGA DE NOVO!</h2>\n                      <br />\n                      <b-button\n                        variant=\"outline-success\"\n                        @click=\"evaluate()\"\n                        class=\"mr-2\"\n                      >JOGAR NOVAMENTE ESTE QUIZ</b-button>\n                      <b-button variant=\"outline-info\" @click=\"evaluate()\">VER ANIMAIS</b-button>\n                    </div>\n                  </b-card-text>\n                </b-tab>\n              </b-tabs>\n            </b-card>\n          </div>\n        </b-col>\n        <b-col cols=\"1\"></b-col>\n      </b-row>\n    </b-container>\n    <pre>\n    {{this.$data}}\n  </pre>\n  </section>\n</template>\n\n<script>\nimport HeaderPage from \"@/components/HeaderPage.vue\";\nimport { mapGetters } from \"vuex\";\nimport { EDIT_USER } from \"@/store/users/user.constants\";\n\nexport default {\n  name: \"Animal\",\n  components: {\n    HeaderPage\n  },\n  data: function() {\n    return {\n      quiz: \"\",\n      option: \"\",\n      currentQuestion: 1,\n      answers: [],\n      correctAnswers: 0,\n      seconds: 30\n    };\n  },\n  computed: {\n    ...mapGetters(\"auth\", [\"getProfile\"]),\n    ...mapGetters(\"user\", [\"getUsersById\"]),\n    ...mapGetters(\"quiz\", [\"getQuizById\"])\n  },\n  methods: {\n    setAnswer() {\n      this.answers.push(this.option);\n      this.currentQuestion += 1;\n      if (this.currentQuestion > this.quiz.questions.length) {\n        this.evaluate();\n      }\n    },\n    evaluate() {\n      let i = 0;\n      for (const question of this.quiz.questions) {\n        const id = question.answers.filter(answer => answer.correct === true)[0]\n          ._id;\n        if (id == this.answers[i]) {\n          this.correctAnswers += 1;\n        }\n        i++;\n      }\n      if (this.correctAnswers === this.quiz.questions.length) {\n        this.setScore(this.quiz.points);\n      }\n    },\n    setScore(points) {\n      const user = this.getProfile \n      user.gamification.points += points\n      user.gamification.quiz += 1\n      \n      this.$store.dispatch(`user/${EDIT_USER}`, user).then(\n        () => {\n          //this.$alert(\"Score atualizado!\", \"Utilizador atualizado!\", \"success\");\n          //router.push({ name: \"home\" });\n        },\n        err => {\n          this.$alert(`${err.message}`, \"Erro\", \"error\");\n        }\n      );\n    }\n  },\n  created() {\n    this.quiz = this.getQuizById(this.$route.params.quizId);\n    let x = setInterval(function() {\n      this.seconds -= 1;\n      if (this.seconds < 0) {\n        clearInterval(x);\n        this.seconds = \"EXPIRED\";\n      }\n    }, 1000);\n  }\n};\n</script>\n\n<style>\nimg {\n  max-width: 100%;\n  max-height: 100%;\n}\n</style>\n"]}]}